# winrun + waygate (prototype)

This repository provides a Linux compatibility prototype for Win32-style binaries.

## Components

- `winrun/`: CLI runner.
  - `winrun <binary>`: normal mode.
  - `winrun -d <binary>`: debug mode (format, native capability, detected APIs/libraries, dispatch logs).
- `waygate/`: compatibility library with placeholder WinAPI-shaped stubs.
- `tests/samples/`: sample sources/scripts. Binary sample artifacts are generated by `setup.sh`.
  - `native_ok` (built ELF executable)
  - `win32_api_sample.bin` (generated non-native file containing WinAPI symbols)
  - `broken_lib_sample.bin` (generated non-native file with unsupported `.so` references)

## Nix shell

Use this command to enter a shell with all tools needed for setup and running the samples:

```bash
nix-shell --run './setup.sh && ./target/debug/winrun tests/samples/native_ok && ./target/debug/winrun -d tests/samples/win32_api_sample.bin && ./target/debug/winrun -d tests/samples/broken_lib_sample.bin'
```

If you only want an interactive environment first:

```bash
nix-shell
```

## Quick start

```bash
./setup.sh
./target/debug/winrun tests/samples/native_ok
./target/debug/winrun -d tests/samples/win32_api_sample.bin
./target/debug/winrun -d tests/samples/broken_lib_sample.bin
```
